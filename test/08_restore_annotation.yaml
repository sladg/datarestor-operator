apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: simple-app-data-restore
  labels:
    backup: "true"
  annotations:
    # backup.datarestor-operator.com/auto-restore-processed: ""
    backup.datarestor-operator.com/manual-restore: "1|default-simple-app-data|backup-scheduled-2025-09-13-20-55-402b85"
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 100Mi
  storageClassName: standard
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: restore-test-app
  labels:
    app: restore-test-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: restore-test-app
  template:
    metadata:
      labels:
        app: restore-test-app
    spec:
      containers:
        - name: logger
          image: busybox:1.35
          command: ["/bin/sh", "-c"]
          resources:
            requests:
              cpu: 10m
              memory: 10Mi
            limits:
              cpu: 100m
              memory: 100Mi
          args:
            - |
              echo "Dumping /data tree from $(hostname)";
              ls -laR /data || true;
              sleep 30;
          volumeMounts:
            - name: data
              mountPath: /data
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: simple-app-data-restore
